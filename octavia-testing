==== prerequisite for Octavia ====

$ source admin-rc

$ openstack flavor create --vcpus 1 --ram 2048 --disk 10 octavia_flavor

$ openstack image create --file test-only-amphora-x64-haproxy-centos-7.qcow2 --disk-format qcow2 --min-disk 3 --public octavia_amphora
$ openstack image set --tag amphora octavia_amphora

$ openstack network create --provider-network-type flat --provider-physical-network physnet1 --external external-network
$ openstack subnet create --no-dhcp --subnet-range 192.168.122.0/24 --allocation-pool start=192.168.122.20,end=192.168.122.200 --network external-network external-subnet

$ openstack network create octavia_network
$ openstack subnet create --subnet-range 192.168.0.0/24 --network octavia_network octavia_subnet

$ openstack router create octavia_router
$ openstack router set --external-gateway external-network octavia_router
$ openstack router add subnet octavia_router octavia_subnet



$ openstack loadbalancer flavorprofile create --name amphora_flavor --provider amphora --flavor-data '{"loadbalancer_topology": "SINGLE", "compute_flavor": "3cae8edd-8751-4175-8825-3f59e07f0431"}'

